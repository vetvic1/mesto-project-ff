{"version":3,"file":"main.js","mappings":"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","sources":["webpack:///./src/components/api.js","webpack:///./src/components/card.js","webpack:///./src/components/modal.js","webpack:///./src/components/validation.js","webpack:///./src/components/config/validationConfig.js","webpack:///./src/components/index.js"],"sourcesContent":["const config = {\r\n  baseUrl: 'https://nomoreparties.co/v1/wff-cohort-12',\r\n  headers: {\r\n    authorization: '3e7f1ddd-d9bd-4f89-89f9-39ccd7f0243e',\r\n    'Content-Type': 'application/json'\r\n  }\r\n}\r\n\r\nconst handleResponse = (res) => {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }  \r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n}\r\n\r\nconst getInitialCards = () => {\r\n    return fetch(`${config.baseUrl}/cards`, {\r\n      headers: config.headers\r\n    })\r\n      .then(handleResponse)\r\n  }; \r\n\r\nconst getUserProfile = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    headers: config.headers\r\n  })\r\n    .then(handleResponse)\r\n}; \r\n\r\nconst updateProfile = (name, description) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: 'PATCH',\r\n    body: JSON.stringify({name: name, about: description}),    \r\n    headers: config.headers\r\n  })\r\n    .then(handleResponse)\r\n};\r\n\r\nconst updateAvatar = (avatar) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: 'PATCH',\r\n    body: JSON.stringify({avatar: avatar}),\r\n    headers: config.headers\r\n  })\r\n    .then(handleResponse)\r\n};\r\n\r\nconst uploadCard = (card) => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: 'POST',\r\n    body: JSON.stringify(card), \r\n    headers: config.headers\r\n  })\r\n    .then(handleResponse)\r\n};\r\n\r\n\r\nconst deleteLike = (id) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${id}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers\r\n  })\r\n    .then(handleResponse)\r\n} \r\n\r\nconst addLike = (id) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${id}`, {\r\n    method: 'PUT',\r\n    headers: config.headers\r\n  })\r\n    .then(handleResponse);\r\n} \r\n\r\nconst deleteCardServer = (id) => {\r\n  return fetch(`${config.baseUrl}/cards/${id}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers\r\n  })\r\n    .then(handleResponse)\r\n};\r\n\r\nexport {getInitialCards, getUserProfile, updateProfile, updateAvatar, uploadCard, deleteLike, addLike, deleteCardServer}","import {deleteCardServer, deleteLike, addLike} from \"./api.js\";\r\n\r\nconst cardTemplate = document.querySelector('#card-template').content;\r\n\r\n\r\n// Функция создания карточки\r\nfunction createCard(card, ownerId, deleteFunction, likeFunction, popupFunction) {\r\n  // Клонируем шаблон\r\n  const newCard = cardTemplate.querySelector('.places__item').cloneNode(true);\r\n  const cardImage = newCard.querySelector('.card__image');\r\n  const cardId = card._id;\r\n  \r\n  // Устанавливаем значения\r\n  cardImage.src = card.link;\r\n  cardImage.alt = card.name;\r\n  newCard.querySelector('.card__title').textContent = card.name;\r\n\r\n  // Добавляем обработчик клика для кнопки просмотра изображения\r\n  cardImage.addEventListener('click', () => popupFunction(card));\r\n  console.log(popupFunction)\r\n  \r\n  // Добавляем обработчик клика для кнопки удаления\r\n  const buttonDelete = newCard.querySelector('.card__delete-button');\r\n    if (card.owner._id !== ownerId) {\r\n        buttonDelete.remove();\r\n    } else {\r\n        buttonDelete.addEventListener('click', () => deleteFunction(newCard, cardId));\r\n    }\r\n  \r\n  // Добавляем обработчик клика для кнопки лайка\r\n  const likeButton = newCard.querySelector('.card__like-button');\r\n  likeButton.addEventListener('click', (event) => likeFunction(event, cardId));\r\n  // Отображаем количество лайков с сервера\r\n  const likesCounter = newCard.querySelector('.card__like-counter');\r\n  likesCounter.textContent = card.likes.length === 0 ? '' : card.likes.length;\r\n    if (card.likes.some(like => like._id === ownerId)) {\r\n        likeButton.classList.add('card__like-button_is-active');\r\n    }\r\n  \r\n  return newCard;\r\n}\r\n\r\n// Функция лайка карточки\r\nconst likeCard = function (event, cardId) {\r\n  const likeButton = event.target.closest('.places__item');\r\n  const likes = likeButton.querySelector('.card__like-counter');\r\n\r\n    if (likeButton.classList.contains('card__like-button_is-active')) {\r\n        deleteLike(cardId)\r\n            .then(data => {\r\n                likeButton.classList.toggle('card__like-button_is-active');\r\n                likes.textContent = data.likes.length === 0 ? '' : data.likes.length;\r\n            })\r\n            .catch(error => console.log(error));\r\n    } else {\r\n        addLike(cardId)\r\n            .then(data => {\r\n                likeButton.classList.toggle('card__like-button_is-active');\r\n                likes.textContent = data.likes.length === 0 ? '' : data.likes.length;\r\n            })\r\n            .catch(error => console.log(error));\r\n    }\r\n};\r\n\r\n// Функция удаления карточки \r\nfunction deleteCard (event, cardId) { \r\n  const iconDelete = event.target.closest('.card');\r\n  deleteCardServer(cardId);\r\n  iconDelete.remove(); \r\n}; \r\n\r\nexport {createCard, deleteCard, likeCard};\r\n","function openModal(target) {\r\n    target.classList.add('popup_is-opened');\r\n    addEscapeListener();\r\n}\r\n\r\nfunction closeModal(target) {\r\n    target.classList.remove('popup_is-opened');\r\n    removeEscapeListener();\r\n}\r\n\r\nfunction addEscapeListener() {\r\n    document.addEventListener('keydown', escapeListener);\r\n}\r\n\r\nfunction removeEscapeListener() {\r\n    document.removeEventListener('keydown', escapeListener);\r\n}\r\n\r\nfunction escapeListener(evt) {\r\n    if (evt.key === 'Escape') {\r\n        closeModal(document.querySelector('.popup_is-opened'));\r\n    }\r\n}\r\n\r\nexport {closeModal, openModal};\r\n","const showInputError = (formElement, inputElement, errorMessage, validationConfig) => {\r\n    const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n    inputElement.classList.add(validationConfig.inputErrorClass);\r\n    errorElement.textContent = errorMessage;\r\n    errorElement.classList.add(validationConfig.errorClass);\r\n  };\r\n  \r\n  const hideInputError = (formElement, inputElement, validationConfig) => {\r\n    const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n    inputElement.classList.remove(validationConfig.inputErrorClass);\r\n    inputElement.setCustomValidity(\"\");\r\n    errorElement.classList.remove(validationConfig.errorClass);\r\n    errorElement.textContent = '';\r\n  };\r\n  \r\n  const isValid = (formElement, inputElement, validationConfig) => {\r\n    if (inputElement.validity.patternMismatch) {\r\n      inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n    } \r\n    else {\r\n      inputElement.setCustomValidity(\"\");\r\n    }\r\n\r\n    if (!inputElement.validity.valid) {\r\n      showInputError(formElement, inputElement, inputElement.validationMessage, validationConfig);\r\n    } \r\n    else {\r\n      hideInputError(formElement, inputElement, validationConfig);\r\n    }\r\n  };\r\n  \r\n  const setEventListeners = (formElement, validationConfig) => {\r\n    const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n    const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\r\n    inputList.forEach((inputElement) => {\r\n      inputElement.addEventListener('input', () => {\r\n        isValid(formElement, inputElement, validationConfig);\r\n        toggleButtonState(inputList, buttonElement, validationConfig);\r\n      });\r\n    });\r\n  };\r\n  \r\n  function enableValidation(validationConfig) {\r\n    const formList = Array.from(document.querySelectorAll(validationConfig.formSelector));\r\n    formList.forEach((formElement) => {\r\n      setEventListeners(formElement, validationConfig);\r\n    });\r\n  };\r\n\r\n  function clearValidation(formElement, validationConfig) {\r\n    const inputs = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n    const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\r\n\r\n    inputs.forEach(input => hideInputError(formElement, input, validationConfig));\r\n    toggleButtonState(inputs, buttonElement, validationConfig);\r\n}\r\n\r\nfunction hasInvalidInput(inputList) {\r\n    return inputList.some(inputElement => !inputElement.validity.valid);\r\n}\r\n\r\nfunction toggleButtonState(inputList, buttonElement, validationConfig) {\r\n    if (hasInvalidInput(inputList)) {\r\n        buttonElement.classList.add(validationConfig.inactiveButtonClass);\r\n    } else {\r\n        buttonElement.classList.remove(validationConfig.inactiveButtonClass);\r\n    }\r\n}\r\n  \r\n  export {enableValidation, clearValidation};","const validationConfig = {\r\n    formSelector: '.popup__form',\r\n    inputSelector: '.popup__input',\r\n    submitButtonSelector: '.popup__button',\r\n    inactiveButtonClass: 'popup__button_disabled',\r\n    inputErrorClass: 'popup__input_type_error',\r\n    errorClass: 'popup__error_visible'\r\n};\r\n\r\nexport default validationConfig;","import {createCard, deleteCard, likeCard} from \"./card.js\";\r\nimport {closeModal, openModal} from \"./modal.js\";\r\nimport {enableValidation, clearValidation} from \"./validation.js\";\r\nimport validationConfig from \"./config/validationConfig\";\r\nimport {getInitialCards, getUserProfile, updateProfile, updateAvatar, uploadCard} from \"./api.js\";\r\n\r\n// Выводим карточки на страницу\r\nconst placesList = document.querySelector(\".places__list\");\r\n\r\nfunction renderCards(res, ownerId) {\r\n    res.forEach(card => {\r\n        placesList.append(createCard(card, ownerId, likeCard, openImagePopup, deleteCard));\r\n    });\r\n}\r\n\r\nenableValidation(validationConfig);\r\n// Закрытие попапа\r\nconst popups = document.querySelectorAll('.popup')\r\n\r\npopups.forEach((popup) => {\r\n    popup.addEventListener('mousedown', (evt) => {\r\n        if (evt.target.classList.contains('popup_is-opened')) {\r\n            closeModal(popup)\r\n        }\r\n        if (evt.target.classList.contains('popup__close')) {\r\n            closeModal(popup)\r\n        }\r\n    })\r\n});\r\n\r\n//Изменение аватара\r\nconst profileImage = document.querySelector('.profile__image');\r\nconst popupUpdateAvatar = document.querySelector('.popup_type_update_avatar');\r\nconst formUpdateAvatar = document.forms['update-avatar'];\r\nconst inputUpdateAvatar = formUpdateAvatar.elements['link'];\r\n\r\nprofileImage.addEventListener('click', () => {\r\n    profileImage.classList.add('clicked');\r\n    inputUpdateAvatar.value = '';\r\n    openModal(popupUpdateAvatar);\r\n    clearValidation(formUpdateAvatar, validationConfig);\r\n});\r\n\r\nprofileImage.addEventListener('mouseout', () => profileImage.classList.remove('clicked'));\r\n\r\nformUpdateAvatar.addEventListener('submit', (evt) => submitUpdateAvatar(evt, inputUpdateAvatar.value));\r\n\r\nfunction submitUpdateAvatar(evt, avatar) {\r\n    evt.preventDefault();\r\n    evt.submitter.textContent = 'Сохранение...';\r\n    updateAvatar(avatar)\r\n        .then((data) => {\r\n            profileImage.style.backgroundImage = `url(${data.avatar})`;\r\n            closeModal(popupUpdateAvatar);\r\n        })\r\n        .catch(error => console.log(error))\r\n        .finally(() => {\r\n            evt.submitter.textContent = 'Сохранить';\r\n        });\r\n}\r\n\r\n// Редактирование профиля\r\nconst profileForm = document.forms['edit-profile'];\r\nconst nameInput = profileForm.elements['name'];\r\nconst jobInput = profileForm.elements['description'];\r\nconst profileTitle = document.querySelector('.profile__title');\r\nconst profileDescription = document.querySelector('.profile__description');\r\nconst profileCloseButton = document.querySelector('.profile__edit-button');\r\nconst popupEditProfile = document.querySelector('.popup_type_edit');\r\n\r\nprofileCloseButton.addEventListener('click', () => {\r\n    fillEditProfilePopup();\r\n    openModal(popupEditProfile);\r\n    clearValidation(profileForm, validationConfig);\r\n});\r\n\r\nfunction fillEditProfilePopup() {\r\n  nameInput.value = profileTitle.textContent;\r\n  jobInput.value = profileDescription.textContent;\r\n}\r\n\r\nprofileForm.addEventListener('submit', (evt) => handleProfileFormSubmit(evt, nameInput.value, jobInput.value));\r\n\r\nfunction handleProfileFormSubmit(evt, name, description) {\r\n    evt.preventDefault();\r\n    evt.submitter.textContent = 'Сохранение...';\r\n    updateProfile(name, description)\r\n    .then((data) => {\r\n        renderProfile(data);\r\n        closeModal(popupEditProfile);\r\n    })\r\n    .catch(error => console.log(error))\r\n    .finally(() => {\r\n        evt.submitter.textContent = 'Сохранить';\r\n    });    \r\n}\r\n\r\nfunction renderProfile(res) {\r\n    profileTitle.textContent = res.name;\r\n    profileDescription.textContent = res.about.replace(/[^а-яА-ЯёЁa-zA-Z \\-]+/g, '');\r\n    profileImage.style.backgroundImage = `url(${res.avatar})`;\r\n}\r\n\r\n// Загружаем данные с сервера\r\nPromise.all([getUserProfile(), getInitialCards()])\r\n    .then(data => {\r\n        renderProfile(data[0]);\r\n        renderCards(data[1], data[0]._id);\r\n    })\r\n    .catch(error => console.log(error));\r\n\r\n// Добавление новой карточки\r\nconst formAddNewCard = document.forms['new-place'];\r\nconst inputNewCardName = formAddNewCard.elements['place-name'];\r\nconst inputNewCardUrl = formAddNewCard.elements['link'];\r\nconst buttonAddNewCard = document.querySelector('.profile__add-button');\r\nconst popupAddNewCard = document.querySelector('.popup_type_new-card');\r\n\r\nbuttonAddNewCard.addEventListener('click', () => {\r\n  formAddNewCard.reset();\r\n  clearValidation(formAddNewCard, validationConfig);\r\n  openModal(popupAddNewCard);\r\n});\r\n\r\nformAddNewCard.addEventListener('submit', submitAddNewCard);\r\n\r\nfunction submitAddNewCard(evt) {\r\n    evt.preventDefault();\r\n    evt.submitter.textContent = 'Сохранение...';\r\n    const card = {\r\n        name: inputNewCardName.value,\r\n        link: inputNewCardUrl.value\r\n    }\r\n    uploadCard(card)\r\n        .then(data => {\r\n            placesList.prepend(createCard(data, data.owner._id, likeCard, openImagePopup, deleteCard));\r\n            closeModal(popupAddNewCard);\r\n        })\r\n        .catch(error => console.log(error))\r\n        .finally(() => {\r\n            evt.submitter.textContent = 'Создать';\r\n        });\r\n} \r\n\r\n//Отображение полноэкранной картинки\r\nconst popupCardImage = document.querySelector('.popup__image');\r\nconst popupCardCaption = document.querySelector('.popup__caption');\r\nconst popupCardWindow = document.querySelector('.popup_type_image');\r\n\r\nfunction openImagePopup(card) {\r\n    fillCardImagePopup(card);\r\n    openModal(popupCardWindow);\r\n}\r\n\r\nfunction fillCardImagePopup(card) {\r\n    popupCardImage.src = card.link;\r\n    popupCardImage.alt = card.name;\r\n    popupCardCaption.textContent = card.name;\r\n}"],"names":["config","baseUrl","headers","authorization","handleResponse","res","ok","json","Promise","reject","concat","status","cardTemplate","document","querySelector","content","createCard","card","ownerId","deleteFunction","likeFunction","popupFunction","newCard","cloneNode","cardImage","cardId","_id","src","link","alt","name","textContent","addEventListener","console","log","buttonDelete","owner","remove","likeButton","event","likes","length","some","like","classList","add","likeCard","id","target","closest","contains","fetch","method","then","data","toggle","catch","error","addLike","deleteCard","iconDelete","openModal","escapeListener","closeModal","removeEventListener","evt","key","hideInputError","formElement","inputElement","validationConfig","errorElement","inputErrorClass","setCustomValidity","errorClass","clearValidation","inputs","Array","from","querySelectorAll","inputSelector","buttonElement","submitButtonSelector","forEach","input","toggleButtonState","inputList","validity","valid","hasInvalidInput","inactiveButtonClass","formSelector","placesList","patternMismatch","dataset","errorMessage","showInputError","validationMessage","isValid","setEventListeners","popup","profileImage","popupUpdateAvatar","formUpdateAvatar","forms","inputUpdateAvatar","elements","value","avatar","preventDefault","submitter","body","JSON","stringify","updateAvatar","style","backgroundImage","finally","submitUpdateAvatar","profileForm","nameInput","jobInput","profileTitle","profileDescription","profileCloseButton","popupEditProfile","renderProfile","about","replace","description","updateProfile","handleProfileFormSubmit","all","append","openImagePopup","formAddNewCard","inputNewCardName","inputNewCardUrl","buttonAddNewCard","popupAddNewCard","reset","uploadCard","prepend","popupCardImage","popupCardCaption","popupCardWindow","fillCardImagePopup"],"sourceRoot":""}